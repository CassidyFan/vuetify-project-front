import{_ as V,am as h,I as b,o as i,b as g,w as o,d as r,ab as u,a as d,f as v,F as I,aW as w,aa as n,ac as S,ad as x}from"./index-Dw_RkeSb.js";import{b as p}from"./route-block-B_A1xBdJ.js";import{V as A}from"./VContainer-Cn03vobC.js";import{V as m}from"./VCol-Czuj4k-K.js";import{V as B}from"./VDivider-BacDmmHe.js";import{V as D}from"./VDataTable-DfeiG0Ue.js";import{V as C}from"./VRow-BwK1FEzd.js";import"./VPagination-Fx8TITQl.js";import"./VSelect-C5qlBPxh.js";import"./VList-BwDHMiTb.js";import"./VListItem-Bv-8gm2s.js";import"./VSlideGroup-C8vOivGx.js";const q=s=>(S("data-v-ed9e3ef7"),s=s(),x(),s),F=q(()=>u("h1",{style:{color:"#41807c"}},"訂單管理",-1)),_={__name:"orders",setup(s){const{apiAuth:f}=w(),y=h(),l=b([]),k=[{title:"編號",key:"_id"},{title:"帳號",key:"user.account"},{title:"日期",key:"createdAt",value:t=>new Date(t.createdAt).toLocaleString()},{title:"商品",key:"cart",sortable:!1},{title:"金額",key:"price",value:t=>t.cart.reduce((a,e)=>e.p_id&&e.p_id.price?a+e.quantity*e.p_id.price:a,0)}];return(async()=>{var t,a;try{const{data:e}=await f.get("/order/all");console.log(e.result),l.value.push(...e.result)}catch(e){console.log(e),y({text:((a=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:a.message)||"發生錯誤",snackbarProps:{color:"red"}})}})(),(t,a)=>(i(),g(A,{class:"order-container"},{default:o(()=>[r(C,null,{default:o(()=>[r(m,{cols:"12"},{default:o(()=>[F]),_:1}),r(B),r(m,{cols:"12"},{default:o(()=>[r(D,{items:l.value,headers:k},{"item.cart":o(e=>[u("ul",null,[(i(!0),d(I,null,v(e.item.cart,c=>(i(),d("li",{key:c._id},n(c.p_id.name)+" * "+n(c.quantity),1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};typeof p=="function"&&p(_);const M=V(_,[["__scopeId","data-v-ed9e3ef7"]]);export{M as default};

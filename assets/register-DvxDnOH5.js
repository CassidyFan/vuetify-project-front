import{_ as k,aQ as C,am as I,o as M,b as B,w as l,aT as F,d as o,aV as N,e,ah as u,ab as w,W as U,a9 as q,ac as A,ad as R}from"./index-D8R_kbzg.js";import{c as T,a as i,f as $,u as D,b as m,V as E}from"./vee-validate.esm-Bkd51MnT.js";import{v}from"./index-DcBOdE6S.js";import{V as O}from"./VContainer-vcsyJ73I.js";import{V as b}from"./VCol-BwPc_UoW.js";import{V as P}from"./VDivider-Dyo-3m8M.js";import{V as J}from"./VRow-CInxM5Cs.js";import"./_commonjsHelpers-Cpj98o6Y.js";const Q=n=>(A("data-v-fae2efca"),n=n(),R(),n),W=Q(()=>w("h1",null,"Register",-1)),j={class:"text-center"},z={__name:"register",setup(n){const{api:_}=F(),x=C(),f=I(),h=T({account:i().required("使用者帳號必填").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符").test("isAlphanumeric","使用者帳號格式錯誤",r=>v.isAlphanumeric(r)),email:i().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",r=>v.isEmail(r)),password:i().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符"),passwordConfirm:i().oneOf([$("password")],"密碼不一致")}),{handleSubmit:S,isSubmitting:V}=D({validationSchema:h}),d=m("account"),c=m("email"),p=m("password"),g=m("passwordConfirm"),y=S(async r=>{var a,s;try{await _.post("/user",{account:r.account,email:r.email,password:r.password});const t=response.data;localStorage.setItem("user",JSON.stringify(t)),f({text:"註冊成功",snackbarProps:{color:"green"}}),x.push("/login")}catch(t){console.log(t),f({text:((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(r,a)=>(M(),B(O,{class:"register-box"},{default:l(()=>[o(J,null,{default:l(()=>[o(b,{cols:"12"},{default:l(()=>[W]),_:1}),o(P),o(b,{cols:"12"},{default:l(()=>[o(E,{onSubmit:N(e(y),["prevent"]),disabled:e(V)},{default:l(()=>[o(u,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(d).value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(d).value.value=s),"error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),o(u,{label:"信箱",type:"email",modelValue:e(c).value.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e(c).value.value=s),"error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),o(u,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(p).value.value,"onUpdate:modelValue":a[2]||(a[2]=s=>e(p).value.value=s),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),o(u,{label:"確認密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(g).value.value,"onUpdate:modelValue":a[3]||(a[3]=s=>e(g).value.value=s),"error-messages":e(g).errorMessage.value},null,8,["modelValue","error-messages"]),w("div",j,[o(U,{class:"register-btn",type:"submit",color:"black",loading:e(V)},{default:l(()=>[q("註冊")]),_:1},8,["loading"])])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1}))}},ae=k(z,[["__scopeId","data-v-fae2efca"]]);export{ae as default};

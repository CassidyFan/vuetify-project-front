import{a5 as _,w as l,au as y,an as C,o as M,b as r,aO as S,d as e,aM as u,R as B,a7 as F,at as U}from"./index-qWkza11C.js";import{c as q,a as n,f as A,u as N,e as m,V as R}from"./vee-validate.esm-w--V6E0Q.js";import{v as g}from"./index-31k6Hkmg.js";import{V as $}from"./VContainer-Cq-d-irz.js";import{V as v}from"./VCol-_xHAf3DZ.js";import{V as k}from"./VDivider-D5WVbQnW.js";import{V as E}from"./VRow-DZN8H2Uj.js";const O=U("h1",{class:"text-center"},"註冊",-1),K={__name:"register",setup(T){const{api:f}=y(),w=C(),b=q({account:n().required("使用者帳號必填").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符").test("isAlphanumeric","使用者帳號格式錯誤",o=>g.isAlphanumeric(o)),email:n().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",o=>g.isEmail(o)),password:n().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符"),passwordConfirm:n().oneOf([A("password")],"密碼不一致")}),{handleSubmit:x,isSubmitting:V}=N({validationSchema:b}),i=m("account"),d=m("email"),p=m("password"),c=m("passwordConfirm"),h=x(async o=>{var a,s;try{await f.post("/user",{account:o.account,email:o.email,password:o.password}),w.push("/login")}catch(t){console.log(t),alert(((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)||"發生錯誤")}});return(o,a)=>(M(),_($,null,{default:l(()=>[r(E,null,{default:l(()=>[r(v,{cols:"12"},{default:l(()=>[O]),_:1}),r(k),r(v,{cols:"12",class:"text-center"},{default:l(()=>[r(R,{onSubmit:S(e(h),["prevent"]),disabled:e(V)},{default:l(()=>[r(u,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(i).value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(i).value.value=s),"error-messages":e(i).errorMessage.value},null,8,["modelValue","error-messages"]),r(u,{label:"信箱",type:"email",modelValue:e(d).value.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e(d).value.value=s),"error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),r(u,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(p).value.value,"onUpdate:modelValue":a[2]||(a[2]=s=>e(p).value.value=s),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),r(u,{label:"確認密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(c).value.value,"onUpdate:modelValue":a[3]||(a[3]=s=>e(c).value.value=s),"error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),r(B,{type:"submit",color:"green",loading:e(V)},{default:l(()=>[F("註冊")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1}))}};export{K as default};

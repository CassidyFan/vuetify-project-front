import{_ as q,b_ as I,aQ as k,am as j,u as B,I as C,o as F,b as M,w as t,d as e,D as N,ab as l,aa as d,e as r,aY as R,ah as $,W as f,a9 as b,bL as D,aW as L,ac as P,ad as T}from"./index-CLC46I6b.js";import{c as U,d as W,u as A,b as E,V as O}from"./vee-validate.esm-RRjSmWKo.js";import{V as Q}from"./VContainer-C6r91f5l.js";import{V as h}from"./VCol-aTZa13rv.js";import{V as g}from"./VRow-CVzLv4Yx.js";import"./_commonjsHelpers-Cpj98o6Y.js";const c=i=>(P("data-v-dfe93036"),i=i(),T(),i),Y={class:"text-center",style:{color:"#212879"}},z=c(()=>l("br",null,null,-1)),G={class:"text-center",style:{color:"#d65c28"}},H=c(()=>l("br",null,null,-1)),J=c(()=>l("br",null,null,-1)),K=c(()=>l("br",null,null,-1)),X=c(()=>l("h1",{class:"text-center text-red"},"已下架",-1)),Z={__name:"[id]",setup(i){const{api:y}=L(),V=I(),v=k(),m=j(),p=B(),a=C({_id:"",name:"",price:0,description:"",image:"",sell:!0,category:""});(async()=>{var n,s;try{const{data:o}=await y.get("/product/"+V.params.id);a.value=o.result,document.title="購物網 | "+a.value.name}catch(o){console.log(o),m({text:((s=(n=o==null?void 0:o.response)==null?void 0:n.data)==null?void 0:s.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const x=U({quantity:W().typeError("數量必填").required("數量必填").min(1,"最少為 1")}),{isSubmitting:_,handleSubmit:S}=A({validationSchema:x,initialValues:{quantity:1}}),u=E("quantity"),w=S(async n=>{if(!p.isLogin){v.push("/login");return}const s=await p.addCart(a.value._id,n.quantity);m({text:s.text,snackbarProps:{color:s.color}})});return(n,s)=>(F(),M(Q,{class:"main-container"},{default:t(()=>[e(g,{class:"fill-height",align:"center",justify:"center"},{default:t(()=>[e(h,{cols:"12",md:"6"},{default:t(()=>[e(N,{src:a.value.image,height:"500"},null,8,["src"])]),_:1}),e(h,{cols:"12",md:"6",class:"d-flex flex-column justify-center"},{default:t(()=>[l("h1",Y,d(a.value.name),1),z,l("h2",G,"$"+d(a.value.price),1),H,l("p",null,d(a.value.description),1),J,e(O,{disabled:r(_),onSubmit:R(r(w),["prevent"])},{default:t(()=>[e($,{type:"number",modelValue:r(u).value,"onUpdate:modelValue":s[0]||(s[0]=o=>r(u).value=o),modelModifiers:{number:!0},"error-messages":r(u).errorMessage,label:"數量"},null,8,["modelValue","error-messages"]),K,e(g,{justify:"end"},{default:t(()=>[e(f,{class:"add-text-btn",type:"submit","prepend-icon":"mdi-cart",loading:r(_)},{default:t(()=>[b(" 加入購物車 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1}),e(D,{class:"align-center justify-center text-center","model-value":!a.value.sell,persistent:""},{default:t(()=>[X,e(f,{to:"/"},{default:t(()=>[b("回首頁")]),_:1})]),_:1},8,["model-value"])]),_:1}))}},ne=q(Z,[["__scopeId","data-v-dfe93036"]]);export{ne as default};

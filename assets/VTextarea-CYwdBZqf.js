import{m as re,a as ie,b as se,c as de,d as ce,e as fe,f as ve,u as me,p as ge,g as xe,h as be,i as he,j as ye,k as Pe,l as we,n as Q,o as X,q as Z,r as ee}from"./VDataTable-B80CEqr1.js";import{p as le,i as oe,b0 as Ve,c as w,t as P,aB as Se,C as Te,j as ne,d as l,F as N,S as F,aW as De,b1 as Fe,b2 as Ce,O as Ie,aY as ke,I as H,B as pe,T as Re,L as Be,K as _,M as Ge,a_ as He,a$ as te,b3 as _e,b4 as Ne,a5 as ae,aC as Ee,b5 as Me,b6 as Ae,b7 as ze,ay as Y,b8 as Oe,G as Ue,J as Le}from"./index-D8R_kbzg.js";import{V as je}from"./VDivider-Dyo-3m8M.js";const $e=le({itemsLength:{type:[Number,String],required:!0},...re(),...ie(),...se()},"VDataTableServer"),Ye=oe()({name:"VDataTableServer",props:$e(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,O){let{attrs:C,slots:t}=O;const{groupBy:r}=de(e),{sortBy:o,multiSort:g,mustSort:U}=ce(e),{page:V,itemsPerPage:I}=fe(e),{disableSort:L}=Ve(e),j=w(()=>parseInt(e.itemsLength,10)),{columns:k,headers:S}=ve(e,{groupBy:r,showSelect:P(e,"showSelect"),showExpand:P(e,"showExpand")}),{items:x}=me(e,k),{toggleSort:b}=ge({sortBy:o,multiSort:g,mustSort:U,page:V}),{opened:$,isGroupOpen:p,toggleGroup:q,extractRows:W}=xe({groupBy:r,sortBy:o,disableSort:L}),{pageCount:J,setItemsPerPage:K}=be({page:V,itemsPerPage:I,itemsLength:j}),{flatItems:f}=he(x,r,$),{isSelected:T,select:R,selectAll:v,toggleSelect:d,someSelected:a,allSelected:i}=ye(e,{allItems:x,currentPage:x}),{isExpanded:n,toggleExpand:s}=Pe(e),h=w(()=>W(x.value));we({page:V,itemsPerPage:I,sortBy:o,groupBy:r,search:P(e,"search")}),Se("v-data-table",{toggleSort:b,sortBy:o}),Te({VDataTableRows:{hideNoData:P(e,"hideNoData"),noDataText:P(e,"noDataText"),loading:P(e,"loading"),loadingText:P(e,"loadingText")}});const u=w(()=>({page:V.value,itemsPerPage:I.value,sortBy:o.value,pageCount:J.value,toggleSort:b,setItemsPerPage:K,someSelected:a.value,allSelected:i.value,isSelected:T,select:R,selectAll:v,toggleSelect:d,isExpanded:n,toggleExpand:s,isGroupOpen:p,toggleGroup:q,items:h.value.map(y=>y.raw),internalItems:h.value,groupedItems:f.value,columns:k.value,headers:S.value}));ne(()=>{const y=Q.filterProps(e),c=X.filterProps(e),D=Z.filterProps(e),E=ee.filterProps(e);return l(ee,F({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},E),{top:()=>{var m;return(m=t.top)==null?void 0:m.call(t,u.value)},default:()=>{var m,M,A,z,B,G;return t.default?t.default(u.value):l(N,null,[(m=t.colgroup)==null?void 0:m.call(t,u.value),!e.hideDefaultHeader&&l("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[l(X,F(c,{sticky:e.fixedHeader}),t)]),(M=t.thead)==null?void 0:M.call(t,u.value),!e.hideDefaultBody&&l("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(A=t["body.prepend"])==null?void 0:A.call(t,u.value),t.body?t.body(u.value):l(Z,F(C,D,{items:f.value}),t),(z=t["body.append"])==null?void 0:z.call(t,u.value)]),(B=t.tbody)==null?void 0:B.call(t,u.value),(G=t.tfoot)==null?void 0:G.call(t,u.value)])},bottom:()=>t.bottom?t.bottom(u.value):!e.hideDefaultFooter&&l(N,null,[l(je,null,null),l(Q,y,{prepend:t["footer.prepend"]})])})})}}),qe=le({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...De(),...Fe()},"VTextarea"),Qe=oe()({name:"VTextarea",directives:{Intersect:Ce},inheritAttrs:!1,props:qe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,O){let{attrs:C,emit:t,slots:r}=O;const o=Ie(e,"modelValue"),{isFocused:g,focus:U,blur:V}=ke(e),I=w(()=>typeof e.counterValue=="function"?e.counterValue(o.value):(o.value||"").toString().length),L=w(()=>{if(C.maxlength)return C.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function j(a,i){var n,s;!e.autofocus||!a||(s=(n=i[0].target)==null?void 0:n.focus)==null||s.call(n)}const k=H(),S=H(),x=pe(""),b=H(),$=w(()=>e.persistentPlaceholder||g.value||e.active);function p(){var a;b.value!==document.activeElement&&((a=b.value)==null||a.focus()),g.value||U()}function q(a){p(),t("click:control",a)}function W(a){t("mousedown:control",a)}function J(a){a.stopPropagation(),p(),Y(()=>{o.value="",Oe(e["onClick:clear"],a)})}function K(a){var n;const i=a.target;if(o.value=i.value,(n=e.modelModifiers)!=null&&n.trim){const s=[i.selectionStart,i.selectionEnd];Y(()=>{i.selectionStart=s[0],i.selectionEnd=s[1]})}}const f=H(),T=H(+e.rows),R=w(()=>["plain","underlined"].includes(e.variant));Re(()=>{e.autoGrow||(T.value=+e.rows)});function v(){e.autoGrow&&Y(()=>{if(!f.value||!S.value)return;const a=getComputedStyle(f.value),i=getComputedStyle(S.value.$el),n=parseFloat(a.getPropertyValue("--v-field-padding-top"))+parseFloat(a.getPropertyValue("--v-input-padding-top"))+parseFloat(a.getPropertyValue("--v-field-padding-bottom")),s=f.value.scrollHeight,h=parseFloat(a.lineHeight),u=Math.max(parseFloat(e.rows)*h+n,parseFloat(i.getPropertyValue("--v-input-control-height"))),y=parseFloat(e.maxRows)*h+n||1/0,c=Le(s??0,u,y);T.value=Math.floor((c-n)/h),x.value=Ue(c)})}Be(v),_(o,v),_(()=>e.rows,v),_(()=>e.maxRows,v),_(()=>e.density,v);let d;return _(f,a=>{a?(d=new ResizeObserver(v),d.observe(f.value)):d==null||d.disconnect()}),Ge(()=>{d==null||d.disconnect()}),ne(()=>{const a=!!(r.counter||e.counter||e.counterValue),i=!!(a||r.details),[n,s]=He(C),{modelValue:h,...u}=te.filterProps(e),y=_e(e);return l(te,F({ref:k,modelValue:o.value,"onUpdate:modelValue":c=>o.value=c,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":R.value},e.class],style:e.style},n,u,{centerAffix:T.value===1&&!R.value,focused:g.value}),{...r,default:c=>{let{id:D,isDisabled:E,isDirty:m,isReadonly:M,isValid:A}=c;return l(Ne,F({ref:S,style:{"--v-textarea-control-height":x.value},onClick:q,onMousedown:W,"onClick:clear":J,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},y,{id:D.value,active:$.value||m.value,centerAffix:T.value===1&&!R.value,dirty:m.value||e.dirty,disabled:E.value,focused:g.value,error:A.value===!1}),{...r,default:z=>{let{props:{class:B,...G}}=z;return l(N,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[e.prefix]),ae(l("textarea",F({ref:b,class:B,value:o.value,onInput:K,autofocus:e.autofocus,readonly:M.value,disabled:E.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:p,onBlur:V},G,s),null),[[Ee("intersect"),{handler:j},null,{once:!0}]]),e.autoGrow&&ae(l("textarea",{class:[B,"v-textarea__sizer"],id:`${G.id}-sizer`,"onUpdate:modelValue":ue=>o.value=ue,ref:f,readonly:!0,"aria-hidden":"true"},null),[[Me,o.value]]),e.suffix&&l("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:i?c=>{var D;return l(N,null,[(D=r.details)==null?void 0:D.call(r,c),a&&l(N,null,[l("span",null,null),l(Ae,{active:e.persistentCounter||g.value,value:I.value,max:L.value,disabled:e.disabled},r.counter)])])}:void 0})}),ze({},k,S,b)}});export{Ye as V,Qe as a};
